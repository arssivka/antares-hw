#Generated by VisualGDB project wizard.
#Note: VisualGDB will automatically update this file when you add new sources to the project.

cmake_minimum_required(VERSION 2.7)
project(antares-hw C CXX)
# include standard math library

set(LIBRARIES_FROM_REFERENCES "")

set(SRC 
	src/port_controller/port_controller.c 
	src/port_handler/port_handler.c
	src/packet_handler/packet_handler.c
	src/dxl_controller/dxl_controller.c)

set(HWSRC
	src/port_handler/port_handler_al.c)


set(3DPARTY_DIR ${PROJECT_SOURCE_DIR}/3rdparty)
	
option(BUILD_HW_TEST "Builds the hw tests " ON)


add_library(antares-hw SHARED src/dxl_controller/dxl_controller.c src/packet_handler/packet_handler.c src/port_controller/port_controller.c src/port_handler/port_handler.c src/port_handler/port_handler_al.c tests/src/linux_hw_test.cpp)

target_link_libraries(antares-hw m rt "${LIBRARIES_FROM_REFERENCES}")

if(BUILD_HW_TEST)
	set(HWTESTSRC
		tests/src/linux_hw_test.cpp)
	add_executable(antares_hw_test src/dxl_controller/dxl_controller.c src/packet_handler/packet_handler.c src/port_controller/port_controller.c src/port_handler/port_handler.c src/port_handler/port_handler_al.c tests/src/linux_hw_test.cpp)
	target_link_libraries(antares_hw_test antares-hw "${LIBRARIES_FROM_REFERENCES}")
endif()


include_directories(./inc)

file(GLOB HEADERS inc/*.h)
install(FILES ${HEADERS} DESTINATION include/${PROJECT_NAME})
install(TARGETS ${PROJECT_NAME} DESTINATION lib/${PROJECT_NAME})
set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -std=c++11 -D_GLIBCXX_USE_NANOSLEEP -DPRINT_PACKET")
set(CMAKE_C_FLAGS_DEBUG "${CMAKE_C_FLAGS_DEBUG} -D_GLIBCXX_USE_NANOSLEEP -DPRINT_PACKET")
